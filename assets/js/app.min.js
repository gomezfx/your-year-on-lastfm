function addToSongMap(t,a,r){var e={};e.name=t.name,e.artist=t.artist,e.album=t.album,e.songUrl=t.songUrl,a.hasOwnProperty(r)?a[r].playCount++:(e.playCount=1,a[r]=e)}function addToAlbumMap(t,a,r){var e={};e.album=t.album,e.artist=t.artist,a.hasOwnProperty(r)?a[r].playCount++:(e.playCount=1,a[r]=e)}function addToArtistMap(t,a,r){var e={};e.artist=t.artist,a.hasOwnProperty(r)?a[r].playCount++:(e.playCount=1,a[r]=e)}function copyObject(t){var a={};for(var r in t)a[r]=t[r];return a}function sortArrayByPlayCount(t,a){for(var r in t){var e=t[r];a.push(e)}a.sort(function(t,a){return a.playCount-t.playCount})}function log(t){console.log(t)}function User(t,a,r){this.name=t,this.realName=a,this.avatarSource=r}function Chart(t,a){this.to=t,this.from=a}function Track(t,a,r){this.name=t,this.artist=a,this.playCount=r}function Album(t,a,r,e){this.name=t,this.artist=a,this.playCount=r,this.mbId=e}function AlbumInfo(t,a,r,e,i){this.artist=t,this.id=a,this.images=r,this.name=e,this.albumUrl=i}function ArtistInfo(t,a,r){this.name=t,this.images=a,this.artistUrl=r}var scrollMagicController=new ScrollMagic.Controller({addIndicators:!0});Vue.filter("padZeroes",function(t){if(null!==t&&void 0!==t){for(var a=t+"";a.length<2;)a="0"+a;return a}}),Vue.filter("addCommas",function(t){return null!==t&&void 0!==t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):void 0}),Vue.filter("isEven",function(t){return t%2==0?!0:!1}),Vue.directive("replace-svg",function(t){var a=$(this.el),r=a.attr("class"),e=a.attr("src");jQuery.get(e,function(t){var e=jQuery(t).find("svg");"undefined"!=typeof r&&(e=e.attr("class",r+" replaced-svg")),e=e.removeAttr("xmlns:a"),a.replaceWith(e)},"xml")}),Vue.directive("scroll-to",function(t){var a=this.el,r=t.to;$(a).click(function(){$("body,html").animate({scrollTop:$(r).offset().top},800)})}),Vue.directive("back-to-top",function(t){var a=this.el;$(a).click(function(){$("body,html").animate({scrollTop:0},800)})}),Vue.directive("count-up",function(t){if(t.bindOn){var a={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""},r=new CountUp(this.el,t.start,t.end,0,t.duration,a);r.start()}}),Vue.directive("first",function(t){t.start===t.index&&this.el.classList.add(t["class"])}),Vue.directive("last",function(t){t.last===t.index&&this.el.classList.add(t["class"])}),Vue.directive("slide-in-right",function(t){this.el.classList.add("slide-in-right"),t&&new ScrollMagic.Scene({triggerElement:this.el,reverse:!1}).setClassToggle(this.el,"active").addTo(scrollMagicController)}),Vue.directive("slide-in-left",function(t){this.el.classList.add("slide-in-left"),t&&new ScrollMagic.Scene({triggerElement:this.el,reverse:!1}).setClassToggle(this.el,"active").addTo(scrollMagicController)}),Vue.directive("slide-in-top",function(t){var a=this.el;t.bindOn&&Vue.nextTick(function(){new ScrollMagic.Scene({triggerElement:a,triggerHook:t.triggerHook,duration:$(window).height()}).setTween(TweenMax.fromTo(a,.5,{scale:.9},{scale:1,ease:Power1.easeOut})).addTo(scrollMagicController);var r=new TimelineMax;r.fromTo(a,.5,{opacity:.3},{opacity:1,ease:Power1.easeOut}),new ScrollMagic.Scene({triggerElement:a,triggerHook:t.triggerHook,duration:$(window).height()/2,offset:$(a).height()/2}).setTween(r).addTo(scrollMagicController)})}),Vue.directive("fade-in-menu",function(t){var a=this.el;t.bindOn&&Vue.nextTick(function(){new ScrollMagic.Scene({triggerElement:$(".menu-trigger")[0],triggerHook:0}).setClassToggle(a,"fade-in").addTo(scrollMagicController)})}),Vue.directive("fade-in-menu-elem",function(t){var a=this.el;t.bindOn&&Vue.nextTick(function(){new ScrollMagic.Scene({triggerElement:$(".menu-trigger")[0],triggerHook:0}).setClassToggle(a,"fade-in").addTo(scrollMagicController)})}),Vue.directive("fade-in",function(t){var a=this.el;t.bindOn&&Vue.nextTick(function(){var r=new TimelineMax;r.fromTo(a,.5,{opacity:t.start},{opacity:t.end,ease:Power1.easeOut}),new ScrollMagic.Scene({triggerElement:a,triggerHook:t.triggerHook,duration:.5*$(window).height()}).setTween(r).addTo(scrollMagicController)})}),Vue.directive("change-color",function(t){var a=this.el;t.bindOn&&Vue.nextTick(function(){var r=new TimelineMax;r.fromTo(a,.5,{backgroundColor:t.start},{backgroundColor:t.end,ease:Power1.easeOut}),new ScrollMagic.Scene({triggerElement:a,triggerHook:t.triggerHook,duration:.5*$(window).height()}).setTween(r).addTo(scrollMagicController)})}),Vue.directive("expand-width",function(t){var a=this.el,r=t;t.bindOn&&Vue.nextTick(function(){var e=new TimelineMax;e.fromTo(a,.5,{width:0},{width:r.width+"px",ease:Power1.easeOut}),new ScrollMagic.Scene({triggerElement:a,triggerHook:t.triggerHook,duration:$(window).height()/2-$(a).parent().outerHeight()/2}).setTween(e).addTo(scrollMagicController)})});var main=new Vue({el:"#main",data:{initialized:!1,loading:!1,infoToggled:!1,username:"",name:"",avatarSource:"",albums:[],tracks:[],artists:[],artistsToggled:!1,links:[],zero:0,album1:"",album2:"",album3:"",album4:"",album5:"",albumsToggled:!1,songs:[],totalScrobbles:0,artistsToggled:!1,menuToggled:!1,springListens:{},summerListens:{},fallListens:{},winterListens:{},initializeCounter:0},created:function(){for(var t=0;5>t;t++)this.albums[t]={album:"",artist:"",image:"",playCount:"",albumUrl:"",artistUrl:""};for(var t=0;10>t;t++)this.songs[t]={name:"",artist:"",playCount:"",songUrl:"",artistUrl:""};for(var t=0;5>t;t++)this.artists[t]={artist:"",playCount:"",image:"",artistUrl:""}},methods:{initialize:function(){var t=1388534400,a=1420070400,r=new LastFmApiClient,e=this;e.loading=!0,r.getInfo(e.username).then(function(t){e.username=t.name,e.name=t.realName;var a=new Image;return a.onload=function(){e.avatarSource=t.avatarSource},a.src=t.avatarSource,r.getWeeklyChartList("gomezfx")}).then(function(i){for(var n=[],s=0;s<i.length;s++)(function(s){var o=i[s];o.from>=t&&o.to<=a&&n.push(r.getRecentTracks(e.username,1,200,o.from,o.to))})(s);return Q.all(n)}).then(function(t){for(var a=[],i=0;i<t.length;i++)for(var n=t[i],s=n.totalPages,o=n.from,l=n.to,u=1;s>=u;u++)a.push(r.getRecentTracks(e.username,u,200,o,l));return Q.all(a)}).then(function(t){for(var a=new Array,i=0;i<t.length;i++)for(var n=t[i].tracks,s=0;s<n.length;s++){var o={},l=n[s];o.name=l.name,o.artist=l.artist,o.album=l.album,o.songUrl=l.songUrl,o.date=l.date,a.push(o)}var u={},m={},c={},g=1388534400,f=1395273600,d=1403308800,h=1411430400,p=141912e4,y={};y.songMap={},y.albumMap={},y.artistMap={},y.from=f,y.to=d;var v={};v.songMap={},v.albumMap={},v.artistMap={},v.from=d,v.to=h;var b={};b.songMap={},b.albumMap={},b.artistMap={},b.from=h,b.to=p;var w={};w.songMap={},w.albumMap={},w.artistMap={},w.from=g,w.to=f;var A=new Array;A.push(y),A.push(v),A.push(b),A.push(w);for(var i=0;i<a.length;i++){var C=a[i],k=C.date,T=(C.name+C.artist).hashCode(),V=(C.album+C.artist).hashCode(),M=C.artist.hashCode();u.hasOwnProperty(T)?u[T].playCount++:(u[T]={},u[T].name=C.name,u[T].artist=C.artist,u[T].album=C.album,u[T].songUrl=C.songUrl,u[T].playCount=1),m.hasOwnProperty(V)?m[V].playCount++:(m[V]={},m[V].album=C.album,m[V].artist=C.artist,m[V].playCount=1),c.hasOwnProperty(M)?c[M].playCount++:(c[M]={},c[M].artist=C.artist,c[M].playCount=1);for(var s=0;s<A.length;s++){var U=A[s];k>=U.from&&k<U.to&&(addToSongMap(C,U.songMap,T),addToAlbumMap(C,U.albumMap,V),addToArtistMap(C,U.artistMap,M))}}e.totalScrobbles=a.length;var S=new Array;sortArrayByPlayCount(u,S);for(var I=[],i=0;10>i;i++)e.songs[i].name=S[i].name,e.songs[i].artist=S[i].artist,e.songs[i].playCount=S[i].playCount,e.songs[i].songUrl=S[i].songUrl,I.push(r.getArtistInfo(S[i].artist));Q.all(I).then(function(t){for(var a=0;10>a;a++)e.songs[a].artistUrl=t[a].artistUrl;e.initializeCounter++});var L=new Array;sortArrayByPlayCount(m,L);for(var O=[],x=[],i=0;5>i;i++)e.albums[i].album=L[i].album,e.albums[i].artist=L[i].artist,e.albums[i].playCount=L[i].playCount,O.push(r.getAlbumInfo(L[i].artist,L[i].album)),x.push(r.getArtistInfo(L[i].artist));Q.all(O).then(function(t){for(var a=0;a<t.length;a++){var r=t[a].images[4];e.albums[a].image=r,e.albums[a].albumUrl=t[a].albumUrl}e.album1=e.albums[0],e.album2=e.albums[1],e.album3=e.albums[2],e.album4=e.albums[3],e.album5=e.albums[4],e.initializeCounter++}),Q.all(x).then(function(t){for(var a=0;a<t.length;a++)e.albums[a].artistUrl=t[a].artistUrl;e.initializeCounter++});var P=new Array;sortArrayByPlayCount(c,P);for(var E=[],i=0;5>i;i++)e.artists[i].artist=P[i].artist,e.artists[i].playCount=P[i].playCount,E.push(r.getArtistInfo(P[i].artist));Q.all(E).then(function(t){for(var a=0;a<t.length;a++){var r=t[a].images[4];e.artists[a].image=r,e.artists[a].artistUrl=t[a].artistUrl}e.initializeCounter++});var F=new Array,$=new Array,N=new Array;sortArrayByPlayCount(y.songMap,F),sortArrayByPlayCount(y.albumMap,$),sortArrayByPlayCount(y.artistMap,N);var B={};B.song=F[0],B.album=$[0],B.artist=N[0],e.springListens=B;var R=new Array,_=new Array,z=new Array;sortArrayByPlayCount(v.songMap,R),sortArrayByPlayCount(v.albumMap,_),sortArrayByPlayCount(v.artistMap,z);var H={};H.song=R[0],H.album=_[0],H.artist=z[0],e.summerListens=H;var J=new Array,q=new Array,K=new Array;sortArrayByPlayCount(b.songMap,J),sortArrayByPlayCount(b.albumMap,q),sortArrayByPlayCount(b.artistMap,K);var Y={};Y.song=J[0],Y.album=q[0],Y.artist=K[0],e.fallListens=Y;var j=new Array,D=new Array,W=new Array;sortArrayByPlayCount(w.songMap,j),sortArrayByPlayCount(w.albumMap,D),sortArrayByPlayCount(w.artistMap,W);var G={};G.song=j[0],G.album=D[0],G.artist=W[0],e.winterListens=G;var Z=[],I=[],E=[];Z.push(r.getAlbumInfo($[0].artist,$[0].album)),Z.push(r.getAlbumInfo(_[0].artist,_[0].album)),Z.push(r.getAlbumInfo(q[0].artist,q[0].album)),Z.push(r.getAlbumInfo(D[0].artist,D[0].album)),Z.push(r.getArtistInfo($[0].artist)),Z.push(r.getArtistInfo(_[0].artist)),Z.push(r.getArtistInfo(q[0].artist)),Z.push(r.getArtistInfo(D[0].artist)),Q.all(Z).then(function(t){e.springListens.album.$add("albumUrl",t[0].albumUrl),e.summerListens.album.$add("albumUrl",t[1].albumUrl),e.fallListens.album.$add("albumUrl",t[2].albumUrl),e.winterListens.album.$add("albumUrl",t[3].albumUrl),e.springListens.album.$add("artistUrl",t[4].artistUrl),e.summerListens.album.$add("artistUrl",t[5].artistUrl),e.fallListens.album.$add("artistUrl",t[6].artistUrl),e.winterListens.album.$add("artistUrl",t[7].artistUrl),e.initializeCounter++}),I.push(r.getArtistInfo(F[0].artist)),I.push(r.getArtistInfo(R[0].artist)),I.push(r.getArtistInfo(J[0].artist)),I.push(r.getArtistInfo(j[0].artist)),Q.all(I).then(function(t){e.springListens.song.$add("artistUrl",t[0].artistUrl),e.summerListens.song.$add("artistUrl",t[1].artistUrl),e.fallListens.song.$add("artistUrl",t[2].artistUrl),e.winterListens.song.$add("artistUrl",t[3].artistUrl),e.initializeCounter++}),E.push(r.getArtistInfo(N[0].artist)),E.push(r.getArtistInfo(z[0].artist)),E.push(r.getArtistInfo(K[0].artist)),E.push(r.getArtistInfo(W[0].artist)),Q.all(E).then(function(t){e.springListens.artist.$add("artistUrl",t[0].artistUrl),e.summerListens.artist.$add("artistUrl",t[1].artistUrl),e.fallListens.artist.$add("artistUrl",t[2].artistUrl),e.winterListens.artist.$add("artistUrl",t[3].artistUrl),e.initializeCounter++})})},toggleInfo:function(){var t=this;t.infoToggled||(t.infoToggled=!0,setTimeout(function(){t.infoToggled=!1},7e3))},showUserInfo:function(){},hideUserInfo:function(){}}});main.$watch(function(){return this.initializeCounter},function(t,a){7===t&&(this.initialized=!0,this.loading=!1)}),String.prototype.hashCode=function(){var t,a,r,e=0;if(0==this.length)return e;for(t=0,r=this.length;r>t;t++)a=this.charCodeAt(t),e=(e<<5)-e+a,e|=0;return e};var Config={API_KEY:"4d37a5a3b63012915e59cbc123a8d879",SECRET:"ac17129556e1ff83babf4b51fa09edc8"};!function(t,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a(require,exports,module):t.CountUp=a()}(this,function(){var t=function(t,a,r,e,i,n){for(var s=0,o=["webkit","moz","ms","o"],l=0;l<o.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[o[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[l]+"CancelAnimationFrame"]||window[o[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var a=(new Date).getTime(),r=Math.max(0,16-(a-s)),e=window.setTimeout(function(){t(a+r)},r);return s=a+r,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),this.options={useEasing:!0,useGrouping:!0,separator:",",decimal:"."};for(var u in n)n.hasOwnProperty(u)&&(this.options[u]=n[u]);""===this.options.separator&&(this.options.useGrouping=!1),this.options.prefix||(this.options.prefix=""),this.options.suffix||(this.options.suffix=""),this.d="string"==typeof t?document.getElementById(t):t,this.startVal=Number(a),isNaN(a)&&(this.startVal=Number(a.match(/[\d]+/g).join(""))),this.endVal=Number(r),isNaN(r)&&(this.endVal=Number(r.match(/[\d]+/g).join(""))),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.decimals=Math.max(0,e||0),this.dec=Math.pow(10,this.decimals),this.duration=1e3*Number(i)||2e3;var m=this;this.version=function(){return"1.5.3"},this.printValue=function(t){var a=isNaN(t)?"--":m.formatNumber(t);"INPUT"==m.d.tagName?this.d.value=a:"text"==m.d.tagName?this.d.textContent=a:this.d.innerHTML=a},this.easeOutExpo=function(t,a,r,e){return 1024*r*(-Math.pow(2,-10*t/e)+1)/1023+a},this.count=function(t){m.startTime||(m.startTime=t),m.timestamp=t;var a=t-m.startTime;m.remaining=m.duration-a,m.frameVal=m.options.useEasing?m.countDown?m.startVal-m.easeOutExpo(a,0,m.startVal-m.endVal,m.duration):m.easeOutExpo(a,m.startVal,m.endVal-m.startVal,m.duration):m.countDown?m.startVal-(m.startVal-m.endVal)*(a/m.duration):m.startVal+(m.endVal-m.startVal)*(a/m.duration),m.frameVal=m.countDown?m.frameVal<m.endVal?m.endVal:m.frameVal:m.frameVal>m.endVal?m.endVal:m.frameVal,m.frameVal=Math.round(m.frameVal*m.dec)/m.dec,m.printValue(m.frameVal),a<m.duration?m.rAF=requestAnimationFrame(m.count):m.callback&&m.callback()},this.start=function(t){return m.callback=t,isNaN(m.endVal)||isNaN(m.startVal)||m.startVal===m.endVal?(console.log("countUp error: startVal or endVal is not a number"),m.printValue(r)):m.rAF=requestAnimationFrame(m.count),!1},this.pauseResume=function(){m.paused?(m.paused=!1,delete m.startTime,m.duration=m.remaining,m.startVal=m.frameVal,requestAnimationFrame(m.count)):(m.paused=!0,cancelAnimationFrame(m.rAF))},this.reset=function(){m.paused=!1,delete m.startTime,m.startVal=a,cancelAnimationFrame(m.rAF),m.printValue(m.startVal)},this.update=function(t){cancelAnimationFrame(m.rAF),m.paused=!1,delete m.startTime,m.startVal=m.frameVal,m.endVal=Number(t),m.countDown=m.startVal>m.endVal,m.rAF=requestAnimationFrame(m.count)},this.formatNumber=function(t){t=t.toFixed(m.decimals),t+="";var a,r,e,i;if(a=t.split("."),r=a[0],e=a.length>1?m.options.decimal+a[1]:"",i=/(\d+)(\d{3})/,m.options.useGrouping)for(;i.test(r);)r=r.replace(i,"$1"+m.options.separator+"$2");return m.options.prefix+r+e+m.options.suffix},m.printValue(m.startVal)};return t});var LastFmApiClient=function(){this.API_KEY=Config.API_KEY,this.SECRET=Config.SECRET,this.BASE_URL="http://ws.audioscrobbler.com",this.FORMAT="json"};LastFmApiClient.prototype.getInfo=function(t){var a=Q.defer(),r=this.BASE_URL;return r+="/2.0/?method=user.getinfo",r+="&format="+this.FORMAT,r+="&api_key="+this.API_KEY,r+="&user="+t,$.get(r,function(t){var r=JSON.stringify(t),e=JSON.parse(r),i=e.user.name,n=e.user.realname,s=e.user.image[2]["#text"],o=new User(i,n,s);a.resolve(o)}),a.promise},LastFmApiClient.prototype.getWeeklyChartList=function(t){var a=Q.defer(),r=this.BASE_URL;return r+="/2.0/?method=user.getweeklychartlist",r+="&format="+this.FORMAT,r+="&api_key="+this.API_KEY,r+="&user="+t,$.get(r,function(t){for(var r=JSON.stringify(t),e=JSON.parse(r),i=[],n=e.weeklychartlist.chart.length,s=0;n>s;s++){var o=parseInt(e.weeklychartlist.chart[s].to),l=parseInt(e.weeklychartlist.chart[s].from),u=new Chart(o,l);i.push(u)}a.resolve(i)}),a.promise},LastFmApiClient.prototype.getWeeklyTrackChart=function(t,a,r){var e=Q.defer(),i=this.BASE_URL;return i+="/2.0/?method=user.getweeklytrackchart",i+="&format="+this.FORMAT,i+="&api_key="+this.API_KEY,i+="&user="+t,i+="&to="+r,i+="&from="+a,$.get(i,function(t){var a,r=JSON.stringify(t),i=JSON.parse(r),n=[];a=void 0===i.weeklytrackchart.track?0:i.weeklytrackchart.track.length;for(var s=0;a>s;s++){var o=i.weeklytrackchart.track[s],l=o.name,u=o.artist["#text"],m=parseInt(o.playcount),c=new Track(l,u,m);n.push(c)}e.resolve(n)}),e.promise},LastFmApiClient.prototype.getWeeklyAlbumChart=function(t,a,r){var e=Q.defer(),i=this.BASE_URL;return i+="/2.0/?method=user.getweeklyalbumchart",i+="&format="+this.FORMAT,i+="&api_key="+this.API_KEY,i+="&user="+t,i+="&to="+r,i+="&from="+a,$.get(i,function(t){var a,r=JSON.stringify(t),i=JSON.parse(r),n=[];a=i.hasOwnProperty("weeklyalbumchart")?void 0===i.weeklyalbumchart.album?0:i.weeklyalbumchart.album.length:0;for(var s=0;a>s;s++){var o=i.weeklyalbumchart.album[s],l=o.name,u=o.artist["#text"],m=parseInt(o.playcount),c=o.mbid,g=new Album(l,u,m,c);n.push(g)}e.resolve(n)}),e.promise},LastFmApiClient.prototype.getRecentTracks=function(t,a,r,e,i){var n=Q.defer(),s=this.BASE_URL;return s+="/2.0/?method=user.getrecenttracks",s+="&format="+this.FORMAT,s+="&api_key="+this.API_KEY,s+="&user="+t,s+="&page="+a,s+="&limit="+r,s+="&to="+i,s+="&from="+e,$.get(s,function(t){var a,r=JSON.stringify(t),s=JSON.parse(r);a=s.hasOwnProperty("recenttracks")?void 0===s.recenttracks.track?0:s.recenttracks.track.length:0;var o={};o.totalPages=s.recenttracks["@attr"].totalPages,o.page=s.recenttracks["@attr"].page,o.tracks=[],o.from=e,o.to=i;for(var l=0;a>l;l++){var u=s.recenttracks.track[l];o.tracks[l]={},o.tracks[l].artist=u.artist["#text"],o.tracks[l].name=u.name,o.tracks[l].album=u.album["#text"],o.tracks[l].songUrl=u.url,o.tracks[l].date=u.date.uts}n.resolve(o)}),n.promise},LastFmApiClient.prototype.getAlbumInfo=function(t,a){var r=Q.defer(),e=this.BASE_URL;return e+="/2.0/?method=album.getinfo",e+="&format="+this.FORMAT,e+="&api_key="+this.API_KEY,e+="&artist="+t,e+="&album="+a,$.get(e,function(t){for(var a=JSON.stringify(t),e=JSON.parse(a).album,i=e.artist,n=e.id,s=new Array,o=0;o<e.image.length;o++)s.push(e.image[o]["#text"]);var l=e.name,u=e.url,m=new AlbumInfo(i,n,s,l,u);r.resolve(m)}),r.promise},LastFmApiClient.prototype.getArtistInfo=function(t){var a=Q.defer(),r=this.BASE_URL;return r+="/2.0/?method=artist.getinfo",r+="&format="+this.FORMAT,r+="&api_key="+this.API_KEY,r+="&artist="+t,$.get(r,function(t){for(var r=JSON.stringify(t),e=JSON.parse(r),i=e.artist,n=new Array,s=0;s<i.image.length;s++)n.push(i.image[s]["#text"]);var o=(e.name,i.url),l=new ArtistInfo(i,n,o);a.resolve(l)}),a.promise};